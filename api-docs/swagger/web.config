<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <!-- CORS 설정 -->
        <httpProtocol>
            <customHeaders>
                <!-- 모든 도메인에서 접근 허용 (운영 환경에서는 특정 도메인으로 변경 권장) -->
                <add name="Access-Control-Allow-Origin" value="*" />

                <!-- 허용할 HTTP 메서드 -->
                <add name="Access-Control-Allow-Methods" value="GET, POST, OPTIONS" />

                <!-- 허용할 요청 헤더 -->
                <add name="Access-Control-Allow-Headers" value="Content-Type, Authorization" />

                <!-- CORS preflight 요청 캐시 시간 (초) -->
                <add name="Access-Control-Max-Age" value="3600" />
            </customHeaders>
        </httpProtocol>

        <!-- MIME 타입 설정 -->
        <staticContent>
            <!-- YAML 파일 MIME 타입 등록 -->
            <remove fileExtension=".yaml" />
            <mimeMap fileExtension=".yaml" mimeType="application/x-yaml" />

            <remove fileExtension=".yml" />
            <mimeMap fileExtension=".yml" mimeType="application/x-yaml" />

            <!-- JSON 파일 MIME 타입 (Postman Collection용) -->
            <remove fileExtension=".json" />
            <mimeMap fileExtension=".json" mimeType="application/json" />
        </staticContent>

        <!-- 기본 문서 설정 -->
        <defaultDocument>
            <files>
                <clear />
                <add value="index.html" />
            </files>
        </defaultDocument>

        <!-- OPTIONS 메서드 처리 (CORS preflight) -->
        <handlers>
            <remove name="OPTIONSVerbHandler" />
        </handlers>
    </system.webServer>
</configuration>
