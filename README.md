# KICC ARS ë°°ì¹˜ ê²°ì œ ì£¼ë¬¸ API

ARS(ìë™ì‘ë‹µì‹œìŠ¤í…œ), SMS, ì¹´ì¹´ì˜¤í†¡ ê²°ì œ ë°©ì‹ì„ ìœ„í•œ ë°°ì¹˜ ì£¼ë¬¸ ì²˜ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
JSON orders ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ ë‹¨ì¼ API í˜¸ì¶œë¡œ ì—¬ëŸ¬ ê±´ì˜ ê²°ì œ ì£¼ë¬¸ì„ ë™ì‹œì— ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## âš¡ ì£¼ìš” íŠ¹ì§•

- **ë°°ì¹˜ ì²˜ë¦¬**: ë‹¨ì¼ API í˜¸ì¶œë¡œ ì—¬ëŸ¬ ê±´ì˜ ì£¼ë¬¸ ë™ì‹œ ìƒì„±
- **ë¶€ë¶„ ì„±ê³µ ì§€ì›**: ì¼ë¶€ ì£¼ë¬¸ ì‹¤íŒ¨ ì‹œì—ë„ ì„±ê³µí•œ ì£¼ë¬¸ì€ ì •ìƒ ì²˜ë¦¬
- **ë‹¤ì–‘í•œ ê²°ì œ íƒ€ì…**: ARS, SMS, ì¹´ì¹´ì˜¤í†¡(KTK) ë°©ì‹ ì§€ì›
- **ì‹¤ì‹œê°„ ê²€ì¦**: ì¤‘ë³µ ì£¼ë¬¸, ê°€ë§¹ì  ì¸ì¦, í•„ìˆ˜ í•„ë“œ ê²€ì¦
- **UTF-8 ì™„ì „ ì§€ì›**: í•œê¸€ ë°ì´í„° ì •ìƒ ì²˜ë¦¬

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: Classic ASP
- **Database**: SQL Server (arspg_web, imds)
- **API ë¬¸ì„œ**: OpenAPI 3.0 + Swagger UI
- **ì¸ì½”ë”©**: UTF-8

## ğŸ“‹ ì‹œì‘í•˜ê¸°

### 1. Swagger UI ë¡œì»¬ í…ŒìŠ¤íŠ¸

```bash
# Windows Batch
cd api-docs/swagger
start-local-server.bat

# PowerShell
cd api-docs/swagger
.\start-local-server.ps1

# Python (í¬ë¡œìŠ¤ í”Œë«í¼)
cd api-docs/swagger
python -m http.server 8000
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8000/index.html` ì ‘ì†

### 2. API ìš”ì²­ ì˜ˆì‹œ

#### JSON ë°°ì¹˜ ì£¼ë¬¸ í˜•ì‹

```json
{
  "mode": "ars_data_add",
  "terminal_id": "05532206",
  "request_type": "ARS",
  "cc_name": "í™ê¸¸ë™",
  "phone_no": "01012345678",
  "card_no": "1234567890123456",
  "expire_date": "2512",
  "install_month": "00",
  "orders": [
    {"order_no": "ORD001", "amount": 1000, "cc_pord_desc": "ìƒí’ˆA"},
    {"order_no": "ORD002", "amount": 2000, "cc_pord_desc": "ìƒí’ˆB"}
  ]
}
```

#### JavaScript ì˜ˆì œ

```javascript
const response = await fetch(apiUrl, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    mode: 'ars_data_add',
    terminal_id: '05532206',
    request_type: 'ARS',
    cc_name: 'í™ê¸¸ë™',
    phone_no: '01012345678',
    card_no: '1234567890123456',
    expire_date: '2512',
    install_month: '00',
    orders: [
      {order_no: 'ORD001', amount: 1000, cc_pord_desc: 'ìƒí’ˆA'},
      {order_no: 'ORD002', amount: 2000, cc_pord_desc: 'ìƒí’ˆB'}
    ]
  })
});

const data = await response.json();
console.log(`ì´ ${data.batch_summary.total}ê±´ / ì„±ê³µ ${data.batch_summary.success}ê±´`);
```

### 3. API ì‘ë‹µ í˜•ì‹

#### ì „ì²´ ì„±ê³µ

```json
{
  "batch_summary": {
    "total": 2,
    "success": 2,
    "fail": 0
  },
  "req_result": [
    {
      "order_no": "ORD001",
      "phone_no": "01012345678",
      "result_code": "0000",
      "message": "ë“±ë¡ì„±ê³µ"
    },
    {
      "order_no": "ORD002",
      "phone_no": "01012345678",
      "result_code": "0000",
      "message": "ë“±ë¡ì„±ê³µ"
    }
  ]
}
```

#### ë¶€ë¶„ ì„±ê³µ

```json
{
  "batch_summary": {
    "total": 2,
    "success": 1,
    "fail": 1
  },
  "req_result": [
    {
      "order_no": "ORD001",
      "phone_no": "01012345678",
      "result_code": "0000",
      "message": "ë“±ë¡ì„±ê³µ"
    },
    {
      "order_no": "ORD002",
      "phone_no": "01012345678",
      "result_code": "0011",
      "message": "ê±°ë˜ë²ˆí˜¸ì¤‘ë³µ"
    }
  ]
}
```

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
kicc/
â”œâ”€â”€ dev/db/                      # ê°œë°œìš© ASP ì—”ë“œí¬ì¸íŠ¸
â”‚   â””â”€â”€ kicc_ars_order_v3_batch_json.asp
â”œâ”€â”€ api-docs/
â”‚   â”œâ”€â”€ swagger/                 # OpenAPI 3.0 ëª…ì„¸ ë° Swagger UI
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ kicc_ars_api_v3_batch.yaml
â”‚   â”‚   â””â”€â”€ update_batch.py
â”‚   â””â”€â”€ postman/                 # Postman í…ŒìŠ¤íŠ¸ ì»¬ë ‰ì…˜
â”œâ”€â”€ docs/                        # ì¶”ê°€ ë¬¸ì„œ
â”œâ”€â”€ CLAUDE.md                    # Claude Code ê°€ì´ë“œ (ìƒì„¸ ë¬¸ì„œ)
â””â”€â”€ README.md                    # í”„ë¡œì íŠ¸ ê°œìš” (ì´ íŒŒì¼)
```

## ğŸ”‘ ì£¼ìš” íŒŒë¼ë¯¸í„°

### ê³µí†µ íŒŒë¼ë¯¸í„° (ëª¨ë“  ì£¼ë¬¸ì— ë™ì¼ ì ìš©)

| íŒŒë¼ë¯¸í„° | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|---------|------|------|------|
| `mode` | âœ… | ì „ì†¡ ëª¨ë“œ | `ars_data_add` |
| `terminal_id` | âœ… | ê°€ë§¹ì  í„°ë¯¸ë„ ID | `05532206` |
| `request_type` | âœ… | ìš”ì²­ íƒ€ì… | `ARS`, `SMS`, `KTK` |
| `cc_name` | âœ… | ê³ ê°ëª… | `í™ê¸¸ë™` |
| `phone_no` | âœ… | ì „í™”ë²ˆí˜¸ | `01012345678` |
| `card_no` | âœ… | ì¹´ë“œë²ˆí˜¸ | `1234567890123456` |
| `expire_date` | âœ… | ìœ íš¨ê¸°ê°„ (YYMM) | `2512` |
| `install_month` | âœ… | í• ë¶€ê°œì›”ìˆ˜ | `00` (ì¼ì‹œë¶ˆ) |
| `cc_email` | âŒ | ì´ë©”ì¼ | `test@example.com` |

### ë°°ì¹˜ íŒŒë¼ë¯¸í„° (ê° ì£¼ë¬¸ë³„ë¡œ ë‹¤ë¥¸ ê°’)

| íŒŒë¼ë¯¸í„° | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|---------|------|------|------|
| `order_no` | âœ… | ì£¼ë¬¸ë²ˆí˜¸ | `ORD001` |
| `amount` | âœ… | ê²°ì œê¸ˆì•¡ | `1000` |
| `cc_pord_desc` | âœ… | ìƒí’ˆëª… | `ìƒí’ˆA` |

## âš ï¸ ì—ëŸ¬ ì½”ë“œ

| ì½”ë“œ | ë©”ì‹œì§€ | ì„¤ëª… |
|------|--------|------|
| `0000` | ë“±ë¡ì„±ê³µ | ì •ìƒ ì²˜ë¦¬ |
| `0001` | ì „ì†¡ë°ì´í„°êµ¬ë¶„ì˜¤ë¥˜ | mode íŒŒë¼ë¯¸í„° ì˜¤ë¥˜ |
| `0002` | ì£¼ë¬¸ë²ˆí˜¸ëˆ„ë½ | orders ë°°ì—´ í•„ìš” |
| `0003` | ê°€ë§¹ì í„°ë¯¸ë„IDëˆ„ë½ | terminal_id ëˆ„ë½ |
| `0005` | ì¹´ë“œë²ˆí˜¸ëˆ„ë½ | card_no ëˆ„ë½ |
| `0006` | ê³ ê°ëª…ëˆ„ë½ | cc_name ëˆ„ë½ |
| `0009` | ì „í™”ë²ˆí˜¸ëˆ„ë½ | phone_no ëˆ„ë½ |
| `0010` | ê°€ë§¹ì í„°ë¯¸ë„IDë¶ˆì¼ì¹˜ | ë¯¸ë“±ë¡ ê°€ë§¹ì  |
| `0011` | ê±°ë˜ë²ˆí˜¸ì¤‘ë³µ | ì¤‘ë³µëœ order_no |
| `0014` | ìœ íš¨ê¸°ê°„ëˆ„ë½ | expire_date ëˆ„ë½ |
| `0015` | í• ë¶€ê°œì›”ìˆ˜ëˆ„ë½ | install_month ëˆ„ë½ |

ì „ì²´ ì—ëŸ¬ ì½”ë“œëŠ” [CLAUDE.md](./CLAUDE.md#ì—ëŸ¬-ì½”ë“œ-ì²´ê³„)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ¯ ìš”ì²­ íƒ€ì…ë³„ ì²˜ë¦¬

### ARS íƒ€ì… (`request_type=ARS`)
- ì „í™” ê²°ì œ ì£¼ë¬¸ ìƒì„±
- SMS ë°œì†¡ ì—†ìŒ
- ì£¼ë¬¸ ì •ë³´ë§Œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥

### SMS/KTK íƒ€ì… (`request_type=SMS` ë˜ëŠ” `KTK`)
- ê° ì£¼ë¬¸ê±´ë§ˆë‹¤ ê°œë³„ ì¸ì¦ë²ˆí˜¸ ìƒì„±
- SMS ë°œì†¡ íì— ë“±ë¡
- SMS ë‚´ìš©: `{ê³ ê°ëª…} ë‹˜ì˜ ì£¼ë¬¸ì¸ì¦ë²ˆí˜¸ëŠ”[{ì¸ì¦ë²ˆí˜¸}]ì…ë‹ˆë‹¤ {ì½œë°±ë²ˆí˜¸} ë¡œì „í™”ì£¼ì‹­ì‹œì˜¤`
- ì½œë°±ë²ˆí˜¸: `02-3490-{ars_dnis}` (ê¸°ë³¸ê°’: 02-3490-4411)

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

- **ê°€ë§¹ì  ì •ë³´**: ë°°ì¹˜ë‹¹ 1íšŒë§Œ ì¡°íšŒ
- **ì¤‘ë³µ ì²´í¬**: ì£¼ë¬¸ê±´ë‹¹ 1íšŒ SELECT ì¿¼ë¦¬
- **INSERT ì‘ì—…**: ì£¼ë¬¸ê±´ë‹¹ 1íšŒ
- **ê¶Œì¥ ë°°ì¹˜ í¬ê¸°**: 1~50ê±´

## ğŸ”’ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

âš ï¸ **Private Repository**: ì´ ì €ì¥ì†ŒëŠ” ë¯¼ê°í•œ ì •ë³´(ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë¬¸ìì—´ ë“±)ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

- ë°ì´í„°ë² ì´ìŠ¤ ìê²© ì¦ëª…ì´ ASP íŒŒì¼ì— í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŒ
- ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì™¸ë¶€ ì„¤ì • íŒŒì¼ ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ê¶Œì¥
- CORS ì •ì±… ìš´ì˜ í™˜ê²½ ë°°í¬ ì „ ê²€í†  í•„ìš”

## ğŸ“š ìƒì„¸ ë¬¸ì„œ

ë” ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”:

- **[CLAUDE.md](./CLAUDE.md)**: ì „ì²´ ê¸°ìˆ  ë¬¸ì„œ ë° ê°œë°œ ê°€ì´ë“œ
- **[Swagger UI](./api-docs/swagger/index.html)**: API ëª…ì„¸ ë° ì¸í„°ë™í‹°ë¸Œ í…ŒìŠ¤íŠ¸
- **[OpenAPI Spec](./api-docs/swagger/kicc_ars_api_v3_batch.yaml)**: OpenAPI 3.0 ëª…ì„¸

## ğŸŒ ë°°í¬ í™˜ê²½

### ê°œë°œ í™˜ê²½
```
https://www.arspg.co.kr/ars/kicc/dev/db/kicc_ars_order_v3_batch_json.asp
```

### ìš´ì˜ í™˜ê²½
```
https://www.arspg.co.kr/ars/kicc/db/kicc_ars_order_v3_batch_json.asp
```

## ğŸ“ ê°œë°œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] UTF-8 ì¸ì½”ë”© ìœ ì§€ (í•œê¸€ ê¹¨ì§ ë°©ì§€)
- [ ] JSON orders ë°°ì—´ ì²˜ë¦¬ ê²€ì¦
- [ ] orders ë°°ì—´ í•„ìˆ˜ í•„ë“œ í™•ì¸ (order_no, amount, cc_pord_desc)
- [ ] ë¶€ë¶„ ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- [ ] Swagger ë¬¸ì„œ ë™ê¸°í™”
- [ ] ì—ëŸ¬ ì½”ë“œ ì •í™•ì„± ê²€ì¦
- [ ] SQL ì¸ì ì…˜ ë°©ì§€ ê²€í† 
- [ ] CORS ì •ì±… ê²€í†  (ìš´ì˜ í™˜ê²½)

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

Private - DASAM ë‚´ë¶€ ì‚¬ìš© ì „ìš©

---

**Maintained by**: DASAM Development Team
